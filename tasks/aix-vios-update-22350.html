<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="ibm, aix, vios, update" name="keywords" />
    <link rel="icon" type="image/x-icon" href="../_static/favicon/favicon.ico">
    <link rel="icon" sizes="16x16" type="image/png" href="../_static/favicon/favicon-16x16.png">
    <link rel="icon" sizes="32x32" type="image/png" href="../_static/favicon/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" type="image/png" href="../_static/favicon/apple-touch-icon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Обновление VIOs до версии 2.2.3.50 &mdash; Ёжъ</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=15bf8b30" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
    <link rel="canonical" href="https://kb.ksomov.ru/tasks/aix-vios-update-22350.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=7f41d439"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Отключение san-диска в VxVM" href="vxvm-remove-disks.html" />
    <link rel="prev" title="Обновление VIOs" href="aix-vios-update.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Ёжъ
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">IT</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../asterisk/index.html">Asterisk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../brocade/index.html">Brocade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../emc/index.html">EMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bsd/index.html">FreeBSD &amp; OpenBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hds/index.html">HDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../homeassistant/index.html">Smart Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ibm/index.html">IBM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/index.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mac/index.html">Mac OS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../matrix/index.html">Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mikrotik/index.html">Mikrotik</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sun-oracle/index.html">Sun &amp; Oracle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uncategorized/index.html">Uncategorized</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vyos/index.html">VyOS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Планы работ</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#id2">Миграция данных</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#id3">Обновление ПО и микрокодов</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#id4">Работы на железе</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#id5">Работа с ОС</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="solaris-branded-zone-ldom.html">Install And Configure Solaris 10 Branded Zone In Ldom</a></li>
<li class="toctree-l3"><a class="reference internal" href="solaris-add-prod-network.html">How to add production network in LDom</a></li>
<li class="toctree-l3"><a class="reference internal" href="solaris-vxvm-upgrade.html">Upgrade Solaris u3 to Solaris u11 and VxVM 5.1 to 6.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="vxvm-upgrade.html">Обновление Veritas SF на f3800-1</a></li>
<li class="toctree-l3"><a class="reference internal" href="aix-vios-update.html">Обновление VIOs</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Обновление VIOs до версии 2.2.3.50</a></li>
<li class="toctree-l3"><a class="reference internal" href="vxvm-remove-disks.html">Отключение san-диска в VxVM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#lpar">Работы с доменами / зонами / lpar’ами</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#vmax">Работа с массивами VMAX</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tourism</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tourism/index.html">Обо всем на свете</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Recipes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../recipes/index.html">Рецепты</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ёжъ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Планы работ</a></li>
      <li class="breadcrumb-item active">Обновление VIOs до версии 2.2.3.50</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/jeffscrum/itdrafts/blob/master/source/tasks/aix-vios-update-22350.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="vios-2-2-3-50">
<span id="aix-vios-update-22350"></span><span id="index-0"></span><h1>Обновление VIOs до версии 2.2.3.50<a class="headerlink" href="#vios-2-2-3-50" title="Link to this heading"></a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-----------------------
Пункт второй:
-----------------------

Обновление VIO серверов до версии 2.2.3.50.
Текущая версия 2.2.2.2.

Обновление VIO серверов необходимо делать поочередно, при
работающих клиентских партициях.

Для данного релиза есть следующее предостережение:
Notice: Please be aware of RSCT APAR IV73126 which can cause trace files to use up to 80MB of additional space in /var. Details can be found in the AIX 6.1 Installation Tips published to My Notifications on May 29, 2015 (https://www14.software.ibm.com/webapp/set2/subscriptions/onvdq).

Для нормальной установки данной версии необходимо будет увеличить размер /var.
Подробности можно прочитать тут:
http://www-01.ibm.com/support/docview.wss?uid=isg1IV73126

Перед обновлением необходимо удостовериться в наличии свободного места в группе rootvg:

Please ensure that your rootvg contains at least 30GB and that there is at least 4GB free space before you attempt to update to Update Release 2.2.3.50. Run the lsvg rootvg command, and then ensure there is enough free space.
Проверка:
$ lsvg rootvg

Согласно следующей ноте:
NOTE: In order to update to Update Release 2.2.3.50 from a level between 2.2.1.1 and 2.2.3.1 in a single step, you can put the 2.2.3.1 and 2.2.3.50 updates in the same location and do the update using the updateios command.

Для обновления до версии 2.2.3.50 с 2.2.2.2 необходимо скачать два дистрибутива и положить их в одну директорию,
что может занять больше места на файловой системе.

Для проверки пакетов обновления:
$ oem_setup_env
Create a link to openssl
# ln -s /usr/bin/openssl /usr/ios/utils/openssl
Verify the link to openssl was created
# ls -alL /usr/bin/openssl /usr/ios/utils/openssl
Both files should display similar owner and size
# exit

Само обновление:
Переходим в окружение root
$ oem_setup_env
Создаем ФС для обновлений (возможно уже есть)
# crfs -v jfs2 -g rootvg -m /updates -a size=&lt;необходимый размер&gt;
Монтирование новой ФС
# mount /updates
Меняем владельца на padmin
# chown padmin /updates
Под пользователем padmin заливаем файлы обновлений по FTP в /updates.
Заливаем файлы для двух дистрибутивов, как было написано ранее.
Пересоздаем toc файл - ОБЯЗАТЕЛЬНО.
Коммитим все предыдущие пакеты
$ updateios -commit

Проверяем скачанные пакеты
$ cp /updates/ck_sum.bff /home/padmin
$ chmod 755 /home/padmin/ck_sum.bff
$ ck_sum.bff /updates
If there are missing updates or incomplete downloads, an error message is displayed.

Согласно ноте:
If your current level is 2.2.2.1, 2.2.2.2, 2.2.2.3, or 2.2.3.1, you need to run updateios command twice to get bos.alt_disk_install.boot_images fileset update problem fixed.

Запускаем процесс обновления из под пользователя padmin
$ updateios -accept -install -dev /updates
$ updateios -accept -dev /updates
Когда обновление завершится вновь принимаем лицензионное соглашение
$ license -accept
Перезагружаем VIOs
$ shutdown -restart
После перезагрузки проверяем версию VIOs
$ ioslevel

Перед проведением обновления обязательно необходимо сделать бэкап системы.

Риски: Неизвестные ошибки ПО.
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="aix-vios-update.html" class="btn btn-neutral float-left" title="Обновление VIOs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="vxvm-remove-disks.html" class="btn btn-neutral float-right" title="Отключение san-диска в VxVM" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Jeff Scrum.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>